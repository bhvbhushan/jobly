{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bhvbhushan/work/springboard/jobly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bhvbhushan/work/springboard/jobly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/bhvbhushan/work/springboard/jobly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhvbhushan/work/springboard/jobly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import axios from\"axios\";// const BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3002\";\nexport var BASE_API_URL='';/** API Class.\n *\n * Static class tying together methods used to get/send to to the API.\n * There shouldn't be any frontend-specific stuff here, and there shouldn't\n * be any API-aware stuff elsewhere in the frontend.\n *\n */var JoblyApi=/*#__PURE__*/function(){function JoblyApi(){_classCallCheck(this,JoblyApi);}_createClass(JoblyApi,null,[{key:\"request\",// the token for interactive with the API will be stored here.\nvalue:function(){var _request=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(endpoint){var data,method,url,headers,params,message,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_args.length>1&&_args[1]!==undefined?_args[1]:{};method=_args.length>2&&_args[2]!==undefined?_args[2]:\"get\";console.debug(\"API Call:\",endpoint,data,method);url=\"\".concat(BASE_URL,\"/\").concat(endpoint);headers={Authorization:\"Bearer \".concat(JoblyApi.token)};params=method===\"get\"?data:{};_context.prev=6;_context.next=9;return axios({url:url,method:method,data:data,params:params,headers:headers});case 9:return _context.abrupt(\"return\",_context.sent.data);case 12:_context.prev=12;_context.t0=_context[\"catch\"](6);console.error(\"API Error:\",_context.t0.response);message=_context.t0.response.data.error.message;throw Array.isArray(message)?message:[message];case 17:case\"end\":return _context.stop();}}},_callee,null,[[6,12]]);}));function request(_x){return _request.apply(this,arguments);}return request;}()// Individual API routes\n/** Get details on a company by handle. */},{key:\"getCompany\",value:function(){var _getCompany=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(handle){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.request(\"companies/\".concat(handle));case 2:res=_context2.sent;return _context2.abrupt(\"return\",res.company);case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function getCompany(_x2){return _getCompany.apply(this,arguments);}return getCompany;}()},{key:\"getAllCompanies\",value:function(){var _getAllCompanies=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name){var res,_res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!name){_context3.next=7;break;}_context3.next=3;return this.request(\"companies/?name=\".concat(name));case 3:res=_context3.sent;return _context3.abrupt(\"return\",res);case 7:_context3.next=9;return this.request(\"companies/\");case 9:_res=_context3.sent;return _context3.abrupt(\"return\",_res);case 11:case\"end\":return _context3.stop();}}},_callee3,this);}));function getAllCompanies(_x3){return _getAllCompanies.apply(this,arguments);}return getAllCompanies;}()},{key:\"getAllJobs\",value:function(){var _getAllJobs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(title){var res,_res2;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!title){_context4.next=7;break;}_context4.next=3;return this.request(\"jobs/?title=\".concat(title));case 3:res=_context4.sent;return _context4.abrupt(\"return\",res);case 7:_context4.next=9;return this.request(\"jobs/\");case 9:_res2=_context4.sent;return _context4.abrupt(\"return\",_res2);case 11:case\"end\":return _context4.stop();}}},_callee4,this);}));function getAllJobs(_x4){return _getAllJobs.apply(this,arguments);}return getAllJobs;}()},{key:\"signup\",value:function(){var _signup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.request(\"auth/register\",data,\"post\");case 2:res=_context5.sent;return _context5.abrupt(\"return\",res.token);case 4:case\"end\":return _context5.stop();}}},_callee5,this);}));function signup(_x5){return _signup.apply(this,arguments);}return signup;}()},{key:\"login\",value:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.request(\"auth/token\",data,\"post\");case 2:res=_context6.sent;return _context6.abrupt(\"return\",res.token);case 4:case\"end\":return _context6.stop();}}},_callee6,this);}));function login(_x6){return _login.apply(this,arguments);}return login;}()},{key:\"getCurrentUser\",value:function(){var _getCurrentUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(username){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.request(\"users/\".concat(username));case 2:res=_context7.sent;return _context7.abrupt(\"return\",res.user);case 4:case\"end\":return _context7.stop();}}},_callee7,this);}));function getCurrentUser(_x7){return _getCurrentUser.apply(this,arguments);}return getCurrentUser;}()},{key:\"saveProfile\",value:function(){var _saveProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(username,data){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.request(\"users/\".concat(username),data,\"patch\");case 2:res=_context8.sent;return _context8.abrupt(\"return\",res.user);case 4:case\"end\":return _context8.stop();}}},_callee8,this);}));function saveProfile(_x8,_x9){return _saveProfile.apply(this,arguments);}return saveProfile;}()},{key:\"applyToJob\",value:function(){var _applyToJob=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(username,id){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.request(\"users/\".concat(username,\"/jobs/\").concat(id),{},\"post\");case 2:case\"end\":return _context9.stop();}}},_callee9,this);}));function applyToJob(_x10,_x11){return _applyToJob.apply(this,arguments);}return applyToJob;}()}]);return JoblyApi;}();export default JoblyApi;","map":{"version":3,"sources":["/Users/bhvbhushan/work/springboard/jobly/frontend/src/api.js"],"names":["axios","BASE_API_URL","JoblyApi","endpoint","data","method","console","debug","url","BASE_URL","headers","Authorization","token","params","error","response","message","Array","isArray","handle","request","res","company","name","title","username","user","id"],"mappings":"2pBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA;AACA,MAAO,IAAMC,CAAAA,YAAY,CAAG,EAArB,CAEP;AACA;AACA;AACA;AACA;AACA;AACA,G,GAEMC,CAAAA,Q,wHACJ;uGAGqBC,Q,6KAAUC,I,+CAAO,E,CAAIC,M,+CAAS,K,CACjDC,OAAO,CAACC,KAAR,CAAc,WAAd,CAA2BJ,QAA3B,CAAqCC,IAArC,CAA2CC,MAA3C,EAEMG,G,WAASC,Q,aAAYN,Q,EACrBO,O,CAAU,CAAEC,aAAa,kBAAYT,QAAQ,CAACU,KAArB,CAAf,C,CACVC,M,CAAUR,MAAM,GAAK,KAAZ,CACXD,IADW,CAEX,E,uCAGYJ,CAAAA,KAAK,CAAC,CAAEQ,GAAG,CAAHA,GAAF,CAAOH,MAAM,CAANA,MAAP,CAAeD,IAAI,CAAJA,IAAf,CAAqBS,MAAM,CAANA,MAArB,CAA6BH,OAAO,CAAPA,OAA7B,CAAD,C,sDAA0CN,I,4DAE7DE,OAAO,CAACQ,KAAR,CAAc,YAAd,CAA4B,YAAIC,QAAhC,EACIC,O,CAAU,YAAID,QAAJ,CAAaX,IAAb,CAAkBU,KAAlB,CAAwBE,O,MAChCC,CAAAA,KAAK,CAACC,OAAN,CAAcF,OAAd,EAAyBA,OAAzB,CAAmC,CAACA,OAAD,C,uJAI7C;AAEA,0C,+HAEwBG,M,qJACN,MAAKC,OAAL,qBAA0BD,MAA1B,E,QAAZE,G,iDACGA,GAAG,CAACC,O,mSAGgBC,I,uIAEvBA,I,iDACc,MAAKH,OAAL,2BAAgCG,IAAhC,E,QAAZF,G,iDACGA,G,gCAES,MAAKD,OAAL,c,QAAZC,I,iDACGA,I,ySAIaG,K,wIAClBA,K,iDACc,MAAKJ,OAAL,uBAA4BI,KAA5B,E,QAAZH,G,iDACGA,G,gCAES,MAAKD,OAAL,S,QAAZC,K,iDACGA,K,kRAISjB,I,qJACF,MAAKgB,OAAL,iBAA8BhB,IAA9B,CAAoC,MAApC,C,QAAZiB,G,iDACGA,GAAG,CAACT,K,mQAGMR,I,qJACD,MAAKgB,OAAL,cAA2BhB,IAA3B,CAAiC,MAAjC,C,QAAZiB,G,iDACGA,GAAG,CAACT,K,kRAGea,Q,qJACV,MAAKL,OAAL,iBAAsBK,QAAtB,E,QAAZJ,G,iDACGA,GAAG,CAACK,I,uSAGYD,Q,CAAUrB,I,qJACjB,MAAKgB,OAAL,iBAAsBK,QAAtB,EAAkCrB,IAAlC,CAAwC,OAAxC,C,QAAZiB,G,iDACGA,GAAG,CAACK,I,gSAGWD,Q,CAAUE,E,6IAC1B,MAAKP,OAAL,iBAAsBK,QAAtB,kBAAuCE,EAAvC,EAA6C,EAA7C,CAAiD,MAAjD,C,uLAKV,cAAezB,CAAAA,QAAf","sourcesContent":["import axios from \"axios\";\n\n// const BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3002\";\nexport const BASE_API_URL = '';\n\n/** API Class.\n *\n * Static class tying together methods used to get/send to to the API.\n * There shouldn't be any frontend-specific stuff here, and there shouldn't\n * be any API-aware stuff elsewhere in the frontend.\n *\n */\n\nclass JoblyApi {\n  // the token for interactive with the API will be stored here.\n  static token;\n\n  static async request(endpoint, data = {}, method = \"get\") {\n    console.debug(\"API Call:\", endpoint, data, method);\n\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = { Authorization: `Bearer ${JoblyApi.token}` };\n    const params = (method === \"get\")\n      ? data\n      : {};\n\n    try {\n      return (await axios({ url, method, data, params, headers })).data;\n    } catch (err) {\n      console.error(\"API Error:\", err.response);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n  // Individual API routes\n\n  /** Get details on a company by handle. */\n\n  static async getCompany(handle) {\n    let res = await this.request(`companies/${handle}`);\n    return res.company;\n  }\n\n  static async getAllCompanies(name) {\n\n    if (name) {\n      let res = await this.request(`companies/?name=${name}`);\n      return res;\n    } else {\n      let res = await this.request(`companies/`);\n      return res;\n    }\n  }\n\n  static async getAllJobs(title) {\n    if (title) {\n      let res = await this.request(`jobs/?title=${title}`);\n      return res;\n    } else {\n      let res = await this.request(`jobs/`);\n      return res;\n    }\n  }\n\n  static async signup(data) {\n    let res = await this.request(`auth/register`, data, \"post\");\n    return res.token;\n  }\n\n  static async login(data) {\n    let res = await this.request(`auth/token`, data, \"post\");\n    return res.token;\n  }\n\n  static async getCurrentUser(username) {\n    let res = await this.request(`users/${username}`);\n    return res.user;\n  }\n\n  static async saveProfile(username, data) {\n    let res = await this.request(`users/${username}`, data, \"patch\");\n    return res.user;\n  }\n\n  static async applyToJob(username, id) {\n    await this.request(`users/${username}/jobs/${id}`, {}, \"post\");\n  }\n\n}\n\nexport default JoblyApi;"]},"metadata":{},"sourceType":"module"}